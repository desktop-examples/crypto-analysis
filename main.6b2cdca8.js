(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{92:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n(0),o=n(8),s=n(3),c=n.n(s);class i extends a.PureComponent{constructor(){super(...arguments),this.width=250}render(){return a.createElement(c.a,{column:!0,width:this.width,className:"sidebar"},a.createElement("h5",null,"BTCUSD"),a.createElement("h2",null,"Bitcoin"))}}var l=n(4),h=n(1),d=n(24),u=n(10);class m extends a.PureComponent{constructor(e){super(e),this.shortMonth=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.surface=a.createRef()}componentDidUpdate(){const{data:e,height:t,width:n}=this.props;if(0===e.length)return;const r=Object(u.a)().domain([0,25e7]).range([0,25]),a=new Set,o=e.map((e=>{const t=e.volume.reduce(((e,t)=>{const n=r(t.volume),o=t.date.getMonth(),s=t.date.getFullYear(),c=`${this.shortMonth[o]} ${s}`;return e.has(c)||e.set(c,[]),a.add(c),e.get(c).push(n),e}),new Map);return{name:e.exchange,volume:t}})),s=(n-90)/13,c=(t-50)/o.length;Object(u.b)(this.surface.current).selectAll("text").data(Array.from(a.values())).enter().append("text").text((e=>e)).attr("transform",((e,t)=>`translate(${t*s+35}, 20)`)).attr("fill","#ffe41d").attr("font-size",10);const i=Object(u.b)(this.surface.current).selectAll("g").data(o).enter().append("g");i.attr("transform",((e,t)=>`translate(25, ${(t+1)*c})`)),i.append("text").text((e=>e.name)).attr("transform",(()=>`translate(${n-90}, 29)`)).attr("fill","#4682B4").attr("font-size",10);const l=i.selectAll("g").data((e=>Array.from(e.volume.entries()))).enter().append("g");l.attr("transform",((e,t)=>`translate(${t*s}, 0)`));l.selectAll("circle").data((e=>e[1].filter((e=>e>.001)))).enter().append("circle").attr("cx",25).attr("cy",25).attr("r",(e=>e)).attr("fill","none").attr("stroke","#4682B4").style("opacity",.5)}render(){const{height:e,width:t}=this.props;return a.createElement("div",{style:{height:"100%",width:"100%"}},a.createElement("svg",{ref:this.surface,height:e,width:t}))}}var p=function(e,t,n,r){var a,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const f=l("stock-chart:component:volumeAnalysis");let g=class extends a.Component{constructor(){super(...arguments),this.volume=[]}componentDidMount(){this.props.historicalPriceStore.getExchangeVolumeData("BTCUSD").then((e=>{Object(h.o)((()=>{this.volume=e}))})).catch((e=>{f(e)}))}render(){const e=this.volume.slice();return a.createElement(c.a,{grow:!0,shrink:!0,basis:"100%",className:"analysis"},a.createElement(d.SizeMe,{monitorHeight:!0,monitorWidth:!0,refreshMode:"debounce",refreshRate:500},(({size:t})=>null===t.width||null===t.height?a.createElement("div",null):a.createElement(m,{height:t.height,width:t.width,data:e}))))}};p([h.n],g.prototype,"volume",void 0),g=p([Object(r.b)("historicalPriceStore"),r.c],g);class y extends a.PureComponent{render(){return a.createElement(c.a,{grow:!0,shrink:!0,basis:"100%"},a.createElement(i,null),a.createElement(g,null))}}class v extends a.PureComponent{constructor(){super(...arguments),this.render=()=>a.createElement(a.Fragment,null,a.createElement(y,null),a.createElement("div",{className:"attribution"}))}}var b=n(25),w=n(26);const E=l("stock-chart:store:prices");const x=l("stock-chart:store:serviceWorker");var P=function(e,t,n,r){var a,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class j{constructor(){this.title="Crypto Analysis",Object(h.g)((()=>{document.title=this.title}))}updateTitle(e){this.title=e}}P([h.n],j.prototype,"title",void 0),P([h.f],j.prototype,"updateTitle",null);const O={historicalPriceStore:new class{constructor(){this.basePriceUrl="https://min-api.cryptocompare.com/data/histoday",this.exchanges=["Bitfinex","Bitstamp","Coinbase","Gemini","Kraken"],this.symbolLength=3}async getExchangeVolumeData(e){E("fetching all volumes from "+this.basePriceUrl);const t=e.slice(0,this.symbolLength),n=e.slice(this.symbolLength),r=w.stringify({fsym:t,limit:364,tsym:n});return Promise.resolve(this.exchanges).then((async e=>{const t=e.map((async e=>{const t=`${this.basePriceUrl}?${r}&e=${e}`;return E("fetching volume data from "+t),fetch(t).then((async e=>{if(e.ok)return e.json();throw new Error(e.statusText)})).then((e=>{if("Success"===e.Response)return e})).then((e=>void 0===e?[]:e.Data.sort(((e,t)=>e.time-t.time)).map((e=>({date:b.unix(e.time).toDate(),volume:e.volumeto-e.volumefrom}))))).then((t=>({exchange:e,volume:t})))}));return Promise.all(t)}))}},serviceWorkerStore:new class{constructor(){this.initialize=()=>{window.onload=()=>{n.e(3).then(n.t.bind(null,94,7)).then((e=>{e.install({onInstalled:()=>{x("onInstalled")},onUpdateFailed:()=>{x("onUpdateFailed")},onUpdateReady:()=>{x("onUpdateReady"),e.applyUpdate()},onUpdated:()=>{x("onUpdated"),location.reload()},onUpdating:()=>{x("onUpdating")}})})).catch((e=>{x(e)}))}},this.initialize()}},windowStore:new j};Object(o.render)(a.createElement(r.a,Object.assign({},O),a.createElement(v,null)),document.getElementById("app"))}},[[92,1,2]]]);